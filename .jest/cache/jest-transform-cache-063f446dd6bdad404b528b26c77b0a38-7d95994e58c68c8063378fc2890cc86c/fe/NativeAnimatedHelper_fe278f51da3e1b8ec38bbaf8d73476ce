ad53ae018599090aeb8842a98607f6e8
'use strict';

var NativeAnimatedModule = require('NativeModules').NativeAnimatedModule;

var NativeEventEmitter = require('NativeEventEmitter');

var invariant = require('fbjs/lib/invariant');

var __nativeAnimatedNodeTagCount = 1;
var __nativeAnimationIdCount = 1;
var nativeEventEmitter;
var API = {
  createAnimatedNode: function createAnimatedNode(tag, config) {
    assertNativeAnimatedModule();
    NativeAnimatedModule.createAnimatedNode(tag, config);
  },
  startListeningToAnimatedNodeValue: function startListeningToAnimatedNodeValue(tag) {
    assertNativeAnimatedModule();
    NativeAnimatedModule.startListeningToAnimatedNodeValue(tag);
  },
  stopListeningToAnimatedNodeValue: function stopListeningToAnimatedNodeValue(tag) {
    assertNativeAnimatedModule();
    NativeAnimatedModule.stopListeningToAnimatedNodeValue(tag);
  },
  connectAnimatedNodes: function connectAnimatedNodes(parentTag, childTag) {
    assertNativeAnimatedModule();
    NativeAnimatedModule.connectAnimatedNodes(parentTag, childTag);
  },
  disconnectAnimatedNodes: function disconnectAnimatedNodes(parentTag, childTag) {
    assertNativeAnimatedModule();
    NativeAnimatedModule.disconnectAnimatedNodes(parentTag, childTag);
  },
  startAnimatingNode: function startAnimatingNode(animationId, nodeTag, config, endCallback) {
    assertNativeAnimatedModule();
    NativeAnimatedModule.startAnimatingNode(animationId, nodeTag, config, endCallback);
  },
  stopAnimation: function stopAnimation(animationId) {
    assertNativeAnimatedModule();
    NativeAnimatedModule.stopAnimation(animationId);
  },
  setAnimatedNodeValue: function setAnimatedNodeValue(nodeTag, value) {
    assertNativeAnimatedModule();
    NativeAnimatedModule.setAnimatedNodeValue(nodeTag, value);
  },
  setAnimatedNodeOffset: function setAnimatedNodeOffset(nodeTag, offset) {
    assertNativeAnimatedModule();
    NativeAnimatedModule.setAnimatedNodeOffset(nodeTag, offset);
  },
  flattenAnimatedNodeOffset: function flattenAnimatedNodeOffset(nodeTag) {
    assertNativeAnimatedModule();
    NativeAnimatedModule.flattenAnimatedNodeOffset(nodeTag);
  },
  extractAnimatedNodeOffset: function extractAnimatedNodeOffset(nodeTag) {
    assertNativeAnimatedModule();
    NativeAnimatedModule.extractAnimatedNodeOffset(nodeTag);
  },
  connectAnimatedNodeToView: function connectAnimatedNodeToView(nodeTag, viewTag) {
    assertNativeAnimatedModule();
    NativeAnimatedModule.connectAnimatedNodeToView(nodeTag, viewTag);
  },
  disconnectAnimatedNodeFromView: function disconnectAnimatedNodeFromView(nodeTag, viewTag) {
    assertNativeAnimatedModule();
    NativeAnimatedModule.disconnectAnimatedNodeFromView(nodeTag, viewTag);
  },
  dropAnimatedNode: function dropAnimatedNode(tag) {
    assertNativeAnimatedModule();
    NativeAnimatedModule.dropAnimatedNode(tag);
  },
  addAnimatedEventToView: function addAnimatedEventToView(viewTag, eventName, eventMapping) {
    assertNativeAnimatedModule();
    NativeAnimatedModule.addAnimatedEventToView(viewTag, eventName, eventMapping);
  },
  removeAnimatedEventFromView: function removeAnimatedEventFromView(viewTag, eventName, animatedNodeTag) {
    assertNativeAnimatedModule();
    NativeAnimatedModule.removeAnimatedEventFromView(viewTag, eventName, animatedNodeTag);
  }
};
var STYLES_WHITELIST = {
  opacity: true,
  transform: true,
  borderRadius: true,
  borderBottomEndRadius: true,
  borderBottomLeftRadius: true,
  borderBottomRightRadius: true,
  borderBottomStartRadius: true,
  borderTopEndRadius: true,
  borderTopLeftRadius: true,
  borderTopRightRadius: true,
  borderTopStartRadius: true,
  elevation: true,
  shadowOpacity: true,
  shadowRadius: true,
  scaleX: true,
  scaleY: true,
  translateX: true,
  translateY: true
};
var TRANSFORM_WHITELIST = {
  translateX: true,
  translateY: true,
  scale: true,
  scaleX: true,
  scaleY: true,
  rotate: true,
  rotateX: true,
  rotateY: true,
  perspective: true
};
var SUPPORTED_INTERPOLATION_PARAMS = {
  inputRange: true,
  outputRange: true,
  extrapolate: true,
  extrapolateRight: true,
  extrapolateLeft: true
};

function addWhitelistedStyleProp(prop) {
  STYLES_WHITELIST[prop] = true;
}

function addWhitelistedTransformProp(prop) {
  TRANSFORM_WHITELIST[prop] = true;
}

function addWhitelistedInterpolationParam(param) {
  SUPPORTED_INTERPOLATION_PARAMS[param] = true;
}

function validateTransform(configs) {
  configs.forEach(function (config) {
    if (!TRANSFORM_WHITELIST.hasOwnProperty(config.property)) {
      throw new Error("Property '" + config.property + "' is not supported by native animated module");
    }
  });
}

function validateStyles(styles) {
  for (var key in styles) {
    if (!STYLES_WHITELIST.hasOwnProperty(key)) {
      throw new Error("Style property '" + key + "' is not supported by native animated module");
    }
  }
}

function validateInterpolation(config) {
  for (var key in config) {
    if (!SUPPORTED_INTERPOLATION_PARAMS.hasOwnProperty(key)) {
      throw new Error("Interpolation property '" + key + "' is not supported by native animated module");
    }
  }
}

function generateNewNodeTag() {
  return __nativeAnimatedNodeTagCount++;
}

function generateNewAnimationId() {
  return __nativeAnimationIdCount++;
}

function assertNativeAnimatedModule() {
  invariant(NativeAnimatedModule, 'Native animated module is not available');
}

var _warnedMissingNativeAnimated = false;

function shouldUseNativeDriver(config) {
  if (config.useNativeDriver && !NativeAnimatedModule) {
    if (!_warnedMissingNativeAnimated) {
      console.warn('Animated: `useNativeDriver` is not supported because the native ' + 'animated module is missing. Falling back to JS-based animation. To ' + 'resolve this, add `RCTAnimation` module to this app, or remove ' + '`useNativeDriver`. ' + 'More info: https://github.com/facebook/react-native/issues/11094#issuecomment-263240420');
      _warnedMissingNativeAnimated = true;
    }

    return false;
  }

  return config.useNativeDriver || false;
}

function transformDataType(value) {
  if (typeof value !== 'string') {
    return value;
  }

  if (/deg$/.test(value)) {
    var degrees = parseFloat(value) || 0;
    var radians = degrees * Math.PI / 180.0;
    return radians;
  } else {
    return parseFloat(value) || 0;
  }
}

module.exports = {
  API: API,
  addWhitelistedStyleProp: addWhitelistedStyleProp,
  addWhitelistedTransformProp: addWhitelistedTransformProp,
  addWhitelistedInterpolationParam: addWhitelistedInterpolationParam,
  validateStyles: validateStyles,
  validateTransform: validateTransform,
  validateInterpolation: validateInterpolation,
  generateNewNodeTag: generateNewNodeTag,
  generateNewAnimationId: generateNewAnimationId,
  assertNativeAnimatedModule: assertNativeAnimatedModule,
  shouldUseNativeDriver: shouldUseNativeDriver,
  transformDataType: transformDataType,

  get nativeEventEmitter() {
    if (!nativeEventEmitter) {
      nativeEventEmitter = new NativeEventEmitter(NativeAnimatedModule);
    }

    return nativeEventEmitter;
  }

};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIk5hdGl2ZUFuaW1hdGVkSGVscGVyLmpzIl0sIm5hbWVzIjpbIk5hdGl2ZUFuaW1hdGVkTW9kdWxlIiwicmVxdWlyZSIsIk5hdGl2ZUV2ZW50RW1pdHRlciIsImludmFyaWFudCIsIl9fbmF0aXZlQW5pbWF0ZWROb2RlVGFnQ291bnQiLCJfX25hdGl2ZUFuaW1hdGlvbklkQ291bnQiLCJuYXRpdmVFdmVudEVtaXR0ZXIiLCJBUEkiLCJjcmVhdGVBbmltYXRlZE5vZGUiLCJ0YWciLCJjb25maWciLCJhc3NlcnROYXRpdmVBbmltYXRlZE1vZHVsZSIsInN0YXJ0TGlzdGVuaW5nVG9BbmltYXRlZE5vZGVWYWx1ZSIsInN0b3BMaXN0ZW5pbmdUb0FuaW1hdGVkTm9kZVZhbHVlIiwiY29ubmVjdEFuaW1hdGVkTm9kZXMiLCJwYXJlbnRUYWciLCJjaGlsZFRhZyIsImRpc2Nvbm5lY3RBbmltYXRlZE5vZGVzIiwic3RhcnRBbmltYXRpbmdOb2RlIiwiYW5pbWF0aW9uSWQiLCJub2RlVGFnIiwiZW5kQ2FsbGJhY2siLCJzdG9wQW5pbWF0aW9uIiwic2V0QW5pbWF0ZWROb2RlVmFsdWUiLCJ2YWx1ZSIsInNldEFuaW1hdGVkTm9kZU9mZnNldCIsIm9mZnNldCIsImZsYXR0ZW5BbmltYXRlZE5vZGVPZmZzZXQiLCJleHRyYWN0QW5pbWF0ZWROb2RlT2Zmc2V0IiwiY29ubmVjdEFuaW1hdGVkTm9kZVRvVmlldyIsInZpZXdUYWciLCJkaXNjb25uZWN0QW5pbWF0ZWROb2RlRnJvbVZpZXciLCJkcm9wQW5pbWF0ZWROb2RlIiwiYWRkQW5pbWF0ZWRFdmVudFRvVmlldyIsImV2ZW50TmFtZSIsImV2ZW50TWFwcGluZyIsInJlbW92ZUFuaW1hdGVkRXZlbnRGcm9tVmlldyIsImFuaW1hdGVkTm9kZVRhZyIsIlNUWUxFU19XSElURUxJU1QiLCJvcGFjaXR5IiwidHJhbnNmb3JtIiwiYm9yZGVyUmFkaXVzIiwiYm9yZGVyQm90dG9tRW5kUmFkaXVzIiwiYm9yZGVyQm90dG9tTGVmdFJhZGl1cyIsImJvcmRlckJvdHRvbVJpZ2h0UmFkaXVzIiwiYm9yZGVyQm90dG9tU3RhcnRSYWRpdXMiLCJib3JkZXJUb3BFbmRSYWRpdXMiLCJib3JkZXJUb3BMZWZ0UmFkaXVzIiwiYm9yZGVyVG9wUmlnaHRSYWRpdXMiLCJib3JkZXJUb3BTdGFydFJhZGl1cyIsImVsZXZhdGlvbiIsInNoYWRvd09wYWNpdHkiLCJzaGFkb3dSYWRpdXMiLCJzY2FsZVgiLCJzY2FsZVkiLCJ0cmFuc2xhdGVYIiwidHJhbnNsYXRlWSIsIlRSQU5TRk9STV9XSElURUxJU1QiLCJzY2FsZSIsInJvdGF0ZSIsInJvdGF0ZVgiLCJyb3RhdGVZIiwicGVyc3BlY3RpdmUiLCJTVVBQT1JURURfSU5URVJQT0xBVElPTl9QQVJBTVMiLCJpbnB1dFJhbmdlIiwib3V0cHV0UmFuZ2UiLCJleHRyYXBvbGF0ZSIsImV4dHJhcG9sYXRlUmlnaHQiLCJleHRyYXBvbGF0ZUxlZnQiLCJhZGRXaGl0ZWxpc3RlZFN0eWxlUHJvcCIsInByb3AiLCJhZGRXaGl0ZWxpc3RlZFRyYW5zZm9ybVByb3AiLCJhZGRXaGl0ZWxpc3RlZEludGVycG9sYXRpb25QYXJhbSIsInBhcmFtIiwidmFsaWRhdGVUcmFuc2Zvcm0iLCJjb25maWdzIiwiZm9yRWFjaCIsImhhc093blByb3BlcnR5IiwicHJvcGVydHkiLCJFcnJvciIsInZhbGlkYXRlU3R5bGVzIiwic3R5bGVzIiwia2V5IiwidmFsaWRhdGVJbnRlcnBvbGF0aW9uIiwiZ2VuZXJhdGVOZXdOb2RlVGFnIiwiZ2VuZXJhdGVOZXdBbmltYXRpb25JZCIsIl93YXJuZWRNaXNzaW5nTmF0aXZlQW5pbWF0ZWQiLCJzaG91bGRVc2VOYXRpdmVEcml2ZXIiLCJ1c2VOYXRpdmVEcml2ZXIiLCJjb25zb2xlIiwid2FybiIsInRyYW5zZm9ybURhdGFUeXBlIiwidGVzdCIsImRlZ3JlZXMiLCJwYXJzZUZsb2F0IiwicmFkaWFucyIsIk1hdGgiLCJQSSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJB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RUFBQUEsdUJBQXVCLEVBQXZCQSx1QkFGZTtBQUdmRSxFQUFBQSwyQkFBMkIsRUFBM0JBLDJCQUhlO0FBSWZDLEVBQUFBLGdDQUFnQyxFQUFoQ0EsZ0NBSmU7QUFLZlEsRUFBQUEsY0FBYyxFQUFkQSxjQUxlO0FBTWZOLEVBQUFBLGlCQUFpQixFQUFqQkEsaUJBTmU7QUFPZlMsRUFBQUEscUJBQXFCLEVBQXJCQSxxQkFQZTtBQVFmQyxFQUFBQSxrQkFBa0IsRUFBbEJBLGtCQVJlO0FBU2ZDLEVBQUFBLHNCQUFzQixFQUF0QkEsc0JBVGU7QUFVZjFFLEVBQUFBLDBCQUEwQixFQUExQkEsMEJBVmU7QUFXZjRFLEVBQUFBLHFCQUFxQixFQUFyQkEscUJBWGU7QUFZZkksRUFBQUEsaUJBQWlCLEVBQWpCQSxpQkFaZTs7QUFhZixNQUFJckYsa0JBQUosR0FBeUI7QUFDdkIsUUFBSSxDQUFDQSxrQkFBTCxFQUF5QjtBQUN2QkEsTUFBQUEsa0JBQWtCLEdBQUcsSUFBSUosa0JBQUosQ0FBdUJGLG9CQUF2QixDQUFyQjtBQUNEOztBQUNELFdBQU9NLGtCQUFQO0FBQ0Q7O0FBbEJjLENBQWpCIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIEZhY2Vib29rLCBJbmMuIGFuZCBpdHMgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKiBAZmxvd1xuICogQGZvcm1hdFxuICovXG4ndXNlIHN0cmljdCc7XG5cbmNvbnN0IE5hdGl2ZUFuaW1hdGVkTW9kdWxlID0gcmVxdWlyZSgnTmF0aXZlTW9kdWxlcycpLk5hdGl2ZUFuaW1hdGVkTW9kdWxlO1xuY29uc3QgTmF0aXZlRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnTmF0aXZlRXZlbnRFbWl0dGVyJyk7XG5cbmNvbnN0IGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xuXG5pbXBvcnQgdHlwZSB7QW5pbWF0aW9uQ29uZmlnfSBmcm9tICcuL2FuaW1hdGlvbnMvQW5pbWF0aW9uJztcbmltcG9ydCB0eXBlIHtFdmVudENvbmZpZ30gZnJvbSAnLi9BbmltYXRlZEV2ZW50JztcblxubGV0IF9fbmF0aXZlQW5pbWF0ZWROb2RlVGFnQ291bnQgPSAxOyAvKiB1c2VkIGZvciBhbmltYXRlZCBub2RlcyAqL1xubGV0IF9fbmF0aXZlQW5pbWF0aW9uSWRDb3VudCA9IDE7IC8qIHVzZWQgZm9yIHN0YXJ0ZWQgYW5pbWF0aW9ucyAqL1xuXG50eXBlIEVuZFJlc3VsdCA9IHtmaW5pc2hlZDogYm9vbGVhbn07XG50eXBlIEVuZENhbGxiYWNrID0gKHJlc3VsdDogRW5kUmVzdWx0KSA9PiB2b2lkO1xudHlwZSBFdmVudE1hcHBpbmcgPSB7XG4gIG5hdGl2ZUV2ZW50UGF0aDogQXJyYXk8c3RyaW5nPixcbiAgYW5pbWF0ZWRWYWx1ZVRhZzogP251bWJlcixcbn07XG5cbmxldCBuYXRpdmVFdmVudEVtaXR0ZXI7XG5cbi8qKlxuICogU2ltcGxlIHdyYXBwZXJzIGFyb3VuZCBOYXRpdmVBbmltYXRlZE1vZHVsZSB0byBwcm92aWRlIGZsb3cgYW5kIGF1dG9jbXBsZXRlIHN1cHBvcnQgZm9yXG4gKiB0aGUgbmF0aXZlIG1vZHVsZSBtZXRob2RzXG4gKi9cbmNvbnN0IEFQSSA9IHtcbiAgY3JlYXRlQW5pbWF0ZWROb2RlOiBmdW5jdGlvbih0YWc6ID9udW1iZXIsIGNvbmZpZzogT2JqZWN0KTogdm9pZCB7XG4gICAgYXNzZXJ0TmF0aXZlQW5pbWF0ZWRNb2R1bGUoKTtcbiAgICBOYXRpdmVBbmltYXRlZE1vZHVsZS5jcmVhdGVBbmltYXRlZE5vZGUodGFnLCBjb25maWcpO1xuICB9LFxuICBzdGFydExpc3RlbmluZ1RvQW5pbWF0ZWROb2RlVmFsdWU6IGZ1bmN0aW9uKHRhZzogP251bWJlcikge1xuICAgIGFzc2VydE5hdGl2ZUFuaW1hdGVkTW9kdWxlKCk7XG4gICAgTmF0aXZlQW5pbWF0ZWRNb2R1bGUuc3RhcnRMaXN0ZW5pbmdUb0FuaW1hdGVkTm9kZVZhbHVlKHRhZyk7XG4gIH0sXG4gIHN0b3BMaXN0ZW5pbmdUb0FuaW1hdGVkTm9kZVZhbHVlOiBmdW5jdGlvbih0YWc6ID9udW1iZXIpIHtcbiAgICBhc3NlcnROYXRpdmVBbmltYXRlZE1vZHVsZSgpO1xuICAgIE5hdGl2ZUFuaW1hdGVkTW9kdWxlLnN0b3BMaXN0ZW5pbmdUb0FuaW1hdGVkTm9kZVZhbHVlKHRhZyk7XG4gIH0sXG4gIGNvbm5lY3RBbmltYXRlZE5vZGVzOiBmdW5jdGlvbihwYXJlbnRUYWc6ID9udW1iZXIsIGNoaWxkVGFnOiA/bnVtYmVyKTogdm9pZCB7XG4gICAgYXNzZXJ0TmF0aXZlQW5pbWF0ZWRNb2R1bGUoKTtcbiAgICBOYXRpdmVBbmltYXRlZE1vZHVsZS5jb25uZWN0QW5pbWF0ZWROb2RlcyhwYXJlbnRUYWcsIGNoaWxkVGFnKTtcbiAgfSxcbiAgZGlzY29ubmVjdEFuaW1hdGVkTm9kZXM6IGZ1bmN0aW9uKFxuICAgIHBhcmVudFRhZzogP251bWJlcixcbiAgICBjaGlsZFRhZzogP251bWJlcixcbiAgKTogdm9pZCB7XG4gICAgYXNzZXJ0TmF0aXZlQW5pbWF0ZWRNb2R1bGUoKTtcbiAgICBOYXRpdmVBbmltYXRlZE1vZHVsZS5kaXNjb25uZWN0QW5pbWF0ZWROb2RlcyhwYXJlbnRUYWcsIGNoaWxkVGFnKTtcbiAgfSxcbiAgc3RhcnRBbmltYXRpbmdOb2RlOiBmdW5jdGlvbihcbiAgICBhbmltYXRpb25JZDogP251bWJlcixcbiAgICBub2RlVGFnOiA/bnVtYmVyLFxuICAgIGNvbmZpZzogT2JqZWN0LFxuICAgIGVuZENhbGxiYWNrOiBFbmRDYWxsYmFjayxcbiAgKTogdm9pZCB7XG4gICAgYXNzZXJ0TmF0aXZlQW5pbWF0ZWRNb2R1bGUoKTtcbiAgICBOYXRpdmVBbmltYXRlZE1vZHVsZS5zdGFydEFuaW1hdGluZ05vZGUoXG4gICAgICBhbmltYXRpb25JZCxcbiAgICAgIG5vZGVUYWcsXG4gICAgICBjb25maWcsXG4gICAgICBlbmRDYWxsYmFjayxcbiAgICApO1xuICB9LFxuICBzdG9wQW5pbWF0aW9uOiBmdW5jdGlvbihhbmltYXRpb25JZDogP251bWJlcikge1xuICAgIGFzc2VydE5hdGl2ZUFuaW1hdGVkTW9kdWxlKCk7XG4gICAgTmF0aXZlQW5pbWF0ZWRNb2R1bGUuc3RvcEFuaW1hdGlvbihhbmltYXRpb25JZCk7XG4gIH0sXG4gIHNldEFuaW1hdGVkTm9kZVZhbHVlOiBmdW5jdGlvbihub2RlVGFnOiA/bnVtYmVyLCB2YWx1ZTogP251bWJlcik6IHZvaWQge1xuICAgIGFzc2VydE5hdGl2ZUFuaW1hdGVkTW9kdWxlKCk7XG4gICAgTmF0aXZlQW5pbWF0ZWRNb2R1bGUuc2V0QW5pbWF0ZWROb2RlVmFsdWUobm9kZVRhZywgdmFsdWUpO1xuICB9LFxuICBzZXRBbmltYXRlZE5vZGVPZmZzZXQ6IGZ1bmN0aW9uKG5vZGVUYWc6ID9udW1iZXIsIG9mZnNldDogP251bWJlcik6IHZvaWQge1xuICAgIGFzc2VydE5hdGl2ZUFuaW1hdGVkTW9kdWxlKCk7XG4gICAgTmF0aXZlQW5pbWF0ZWRNb2R1bGUuc2V0QW5pbWF0ZWROb2RlT2Zmc2V0KG5vZGVUYWcsIG9mZnNldCk7XG4gIH0sXG4gIGZsYXR0ZW5BbmltYXRlZE5vZGVPZmZzZXQ6IGZ1bmN0aW9uKG5vZGVUYWc6ID9udW1iZXIpOiB2b2lkIHtcbiAgICBhc3NlcnROYXRpdmVBbmltYXRlZE1vZHVsZSgpO1xuICAgIE5hdGl2ZUFuaW1hdGVkTW9kdWxlLmZsYXR0ZW5BbmltYXRlZE5vZGVPZmZzZXQobm9kZVRhZyk7XG4gIH0sXG4gIGV4dHJhY3RBbmltYXRlZE5vZGVPZmZzZXQ6IGZ1bmN0aW9uKG5vZGVUYWc6ID9udW1iZXIpOiB2b2lkIHtcbiAgICBhc3NlcnROYXRpdmVBbmltYXRlZE1vZHVsZSgpO1xuICAgIE5hdGl2ZUFuaW1hdGVkTW9kdWxlLmV4dHJhY3RBbmltYXRlZE5vZGVPZmZzZXQobm9kZVRhZyk7XG4gIH0sXG4gIGNvbm5lY3RBbmltYXRlZE5vZGVUb1ZpZXc6IGZ1bmN0aW9uKFxuICAgIG5vZGVUYWc6ID9udW1iZXIsXG4gICAgdmlld1RhZzogP251bWJlcixcbiAgKTogdm9pZCB7XG4gICAgYXNzZXJ0TmF0aXZlQW5pbWF0ZWRNb2R1bGUoKTtcbiAgICBOYXRpdmVBbmltYXRlZE1vZHVsZS5jb25uZWN0QW5pbWF0ZWROb2RlVG9WaWV3KG5vZGVUYWcsIHZpZXdUYWcpO1xuICB9LFxuICBkaXNjb25uZWN0QW5pbWF0ZWROb2RlRnJvbVZpZXc6IGZ1bmN0aW9uKFxuICAgIG5vZGVUYWc6ID9udW1iZXIsXG4gICAgdmlld1RhZzogP251bWJlcixcbiAgKTogdm9pZCB7XG4gICAgYXNzZXJ0TmF0aXZlQW5pbWF0ZWRNb2R1bGUoKTtcbiAgICBOYXRpdmVBbmltYXRlZE1vZHVsZS5kaXNjb25uZWN0QW5pbWF0ZWROb2RlRnJvbVZpZXcobm9kZVRhZywgdmlld1RhZyk7XG4gIH0sXG4gIGRyb3BBbmltYXRlZE5vZGU6IGZ1bmN0aW9uKHRhZzogP251bWJlcik6IHZvaWQge1xuICAgIGFzc2VydE5hdGl2ZUFuaW1hdGVkTW9kdWxlKCk7XG4gICAgTmF0aXZlQW5pbWF0ZWRNb2R1bGUuZHJvcEFuaW1hdGVkTm9kZSh0YWcpO1xuICB9LFxuICBhZGRBbmltYXRlZEV2ZW50VG9WaWV3OiBmdW5jdGlvbihcbiAgICB2aWV3VGFnOiA/bnVtYmVyLFxuICAgIGV2ZW50TmFtZTogc3RyaW5nLFxuICAgIGV2ZW50TWFwcGluZzogRXZlbnRNYXBwaW5nLFxuICApIHtcbiAgICBhc3NlcnROYXRpdmVBbmltYXRlZE1vZHVsZSgpO1xuICAgIE5hdGl2ZUFuaW1hdGVkTW9kdWxlLmFkZEFuaW1hdGVkRXZlbnRUb1ZpZXcoXG4gICAgICB2aWV3VGFnLFxuICAgICAgZXZlbnROYW1lLFxuICAgICAgZXZlbnRNYXBwaW5nLFxuICAgICk7XG4gIH0sXG4gIHJlbW92ZUFuaW1hdGVkRXZlbnRGcm9tVmlldyhcbiAgICB2aWV3VGFnOiA/bnVtYmVyLFxuICAgIGV2ZW50TmFtZTogc3RyaW5nLFxuICAgIGFuaW1hdGVkTm9kZVRhZzogP251bWJlcixcbiAgKSB7XG4gICAgYXNzZXJ0TmF0aXZlQW5pbWF0ZWRNb2R1bGUoKTtcbiAgICBOYXRpdmVBbmltYXRlZE1vZHVsZS5yZW1vdmVBbmltYXRlZEV2ZW50RnJvbVZpZXcoXG4gICAgICB2aWV3VGFnLFxuICAgICAgZXZlbnROYW1lLFxuICAgICAgYW5pbWF0ZWROb2RlVGFnLFxuICAgICk7XG4gIH0sXG59O1xuXG4vKipcbiAqIFN0eWxlcyBhbGxvd2VkIGJ5IHRoZSBuYXRpdmUgYW5pbWF0ZWQgaW1wbGVtZW50YXRpb24uXG4gKlxuICogSW4gZ2VuZXJhbCBuYXRpdmUgYW5pbWF0ZWQgaW1wbGVtZW50YXRpb24gc2hvdWxkIHN1cHBvcnQgYW55IG51bWVyaWMgcHJvcGVydHkgdGhhdCBkb2Vzbid0IG5lZWRcbiAqIHRvIGJlIHVwZGF0ZWQgdGhyb3VnaCB0aGUgc2hhZG93IHZpZXcgaGllcmFyY2h5IChhbGwgbm9uLWxheW91dCBwcm9wZXJ0aWVzKS5cbiAqL1xuY29uc3QgU1RZTEVTX1dISVRFTElTVCA9IHtcbiAgb3BhY2l0eTogdHJ1ZSxcbiAgdHJhbnNmb3JtOiB0cnVlLFxuICBib3JkZXJSYWRpdXM6IHRydWUsXG4gIGJvcmRlckJvdHRvbUVuZFJhZGl1czogdHJ1ZSxcbiAgYm9yZGVyQm90dG9tTGVmdFJhZGl1czogdHJ1ZSxcbiAgYm9yZGVyQm90dG9tUmlnaHRSYWRpdXM6IHRydWUsXG4gIGJvcmRlckJvdHRvbVN0YXJ0UmFkaXVzOiB0cnVlLFxuICBib3JkZXJUb3BFbmRSYWRpdXM6IHRydWUsXG4gIGJvcmRlclRvcExlZnRSYWRpdXM6IHRydWUsXG4gIGJvcmRlclRvcFJpZ2h0UmFkaXVzOiB0cnVlLFxuICBib3JkZXJUb3BTdGFydFJhZGl1czogdHJ1ZSxcbiAgZWxldmF0aW9uOiB0cnVlLFxuICAvKiBpb3Mgc3R5bGVzICovXG4gIHNoYWRvd09wYWNpdHk6IHRydWUsXG4gIHNoYWRvd1JhZGl1czogdHJ1ZSxcbiAgLyogbGVnYWN5IGFuZHJvaWQgdHJhbnNmb3JtIHByb3BlcnRpZXMgKi9cbiAgc2NhbGVYOiB0cnVlLFxuICBzY2FsZVk6IHRydWUsXG4gIHRyYW5zbGF0ZVg6IHRydWUsXG4gIHRyYW5zbGF0ZVk6IHRydWUsXG59O1xuXG5jb25zdCBUUkFOU0ZPUk1fV0hJVEVMSVNUID0ge1xuICB0cmFuc2xhdGVYOiB0cnVlLFxuICB0cmFuc2xhdGVZOiB0cnVlLFxuICBzY2FsZTogdHJ1ZSxcbiAgc2NhbGVYOiB0cnVlLFxuICBzY2FsZVk6IHRydWUsXG4gIHJvdGF0ZTogdHJ1ZSxcbiAgcm90YXRlWDogdHJ1ZSxcbiAgcm90YXRlWTogdHJ1ZSxcbiAgcGVyc3BlY3RpdmU6IHRydWUsXG59O1xuXG5jb25zdCBTVVBQT1JURURfSU5URVJQT0xBVElPTl9QQVJBTVMgPSB7XG4gIGlucHV0UmFuZ2U6IHRydWUsXG4gIG91dHB1dFJhbmdlOiB0cnVlLFxuICBleHRyYXBvbGF0ZTogdHJ1ZSxcbiAgZXh0cmFwb2xhdGVSaWdodDogdHJ1ZSxcbiAgZXh0cmFwb2xhdGVMZWZ0OiB0cnVlLFxufTtcblxuZnVuY3Rpb24gYWRkV2hpdGVsaXN0ZWRTdHlsZVByb3AocHJvcDogc3RyaW5nKTogdm9pZCB7XG4gIFNUWUxFU19XSElURUxJU1RbcHJvcF0gPSB0cnVlO1xufVxuXG5mdW5jdGlvbiBhZGRXaGl0ZWxpc3RlZFRyYW5zZm9ybVByb3AocHJvcDogc3RyaW5nKTogdm9pZCB7XG4gIFRSQU5TRk9STV9XSElURUxJU1RbcHJvcF0gPSB0cnVlO1xufVxuXG5mdW5jdGlvbiBhZGRXaGl0ZWxpc3RlZEludGVycG9sYXRpb25QYXJhbShwYXJhbTogc3RyaW5nKTogdm9pZCB7XG4gIFNVUFBPUlRFRF9JTlRFUlBPTEFUSU9OX1BBUkFNU1twYXJhbV0gPSB0cnVlO1xufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZVRyYW5zZm9ybShjb25maWdzOiBBcnJheTxPYmplY3Q+KTogdm9pZCB7XG4gIGNvbmZpZ3MuZm9yRWFjaChjb25maWcgPT4ge1xuICAgIGlmICghVFJBTlNGT1JNX1dISVRFTElTVC5oYXNPd25Qcm9wZXJ0eShjb25maWcucHJvcGVydHkpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBQcm9wZXJ0eSAnJHtcbiAgICAgICAgICBjb25maWcucHJvcGVydHlcbiAgICAgICAgfScgaXMgbm90IHN1cHBvcnRlZCBieSBuYXRpdmUgYW5pbWF0ZWQgbW9kdWxlYCxcbiAgICAgICk7XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVTdHlsZXMoc3R5bGVzOiBPYmplY3QpOiB2b2lkIHtcbiAgZm9yIChjb25zdCBrZXkgaW4gc3R5bGVzKSB7XG4gICAgaWYgKCFTVFlMRVNfV0hJVEVMSVNULmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYFN0eWxlIHByb3BlcnR5ICcke2tleX0nIGlzIG5vdCBzdXBwb3J0ZWQgYnkgbmF0aXZlIGFuaW1hdGVkIG1vZHVsZWAsXG4gICAgICApO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZUludGVycG9sYXRpb24oY29uZmlnOiBPYmplY3QpOiB2b2lkIHtcbiAgZm9yIChjb25zdCBrZXkgaW4gY29uZmlnKSB7XG4gICAgaWYgKCFTVVBQT1JURURfSU5URVJQT0xBVElPTl9QQVJBTVMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgSW50ZXJwb2xhdGlvbiBwcm9wZXJ0eSAnJHtrZXl9JyBpcyBub3Qgc3VwcG9ydGVkIGJ5IG5hdGl2ZSBhbmltYXRlZCBtb2R1bGVgLFxuICAgICAgKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVOZXdOb2RlVGFnKCk6IG51bWJlciB7XG4gIHJldHVybiBfX25hdGl2ZUFuaW1hdGVkTm9kZVRhZ0NvdW50Kys7XG59XG5cbmZ1bmN0aW9uIGdlbmVyYXRlTmV3QW5pbWF0aW9uSWQoKTogbnVtYmVyIHtcbiAgcmV0dXJuIF9fbmF0aXZlQW5pbWF0aW9uSWRDb3VudCsrO1xufVxuXG5mdW5jdGlvbiBhc3NlcnROYXRpdmVBbmltYXRlZE1vZHVsZSgpOiB2b2lkIHtcbiAgaW52YXJpYW50KE5hdGl2ZUFuaW1hdGVkTW9kdWxlLCAnTmF0aXZlIGFuaW1hdGVkIG1vZHVsZSBpcyBub3QgYXZhaWxhYmxlJyk7XG59XG5cbmxldCBfd2FybmVkTWlzc2luZ05hdGl2ZUFuaW1hdGVkID0gZmFsc2U7XG5cbmZ1bmN0aW9uIHNob3VsZFVzZU5hdGl2ZURyaXZlcihjb25maWc6IEFuaW1hdGlvbkNvbmZpZyB8IEV2ZW50Q29uZmlnKTogYm9vbGVhbiB7XG4gIGlmIChjb25maWcudXNlTmF0aXZlRHJpdmVyICYmICFOYXRpdmVBbmltYXRlZE1vZHVsZSkge1xuICAgIGlmICghX3dhcm5lZE1pc3NpbmdOYXRpdmVBbmltYXRlZCkge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAnQW5pbWF0ZWQ6IGB1c2VOYXRpdmVEcml2ZXJgIGlzIG5vdCBzdXBwb3J0ZWQgYmVjYXVzZSB0aGUgbmF0aXZlICcgK1xuICAgICAgICAgICdhbmltYXRlZCBtb2R1bGUgaXMgbWlzc2luZy4gRmFsbGluZyBiYWNrIHRvIEpTLWJhc2VkIGFuaW1hdGlvbi4gVG8gJyArXG4gICAgICAgICAgJ3Jlc29sdmUgdGhpcywgYWRkIGBSQ1RBbmltYXRpb25gIG1vZHVsZSB0byB0aGlzIGFwcCwgb3IgcmVtb3ZlICcgK1xuICAgICAgICAgICdgdXNlTmF0aXZlRHJpdmVyYC4gJyArXG4gICAgICAgICAgJ01vcmUgaW5mbzogaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlYWN0LW5hdGl2ZS9pc3N1ZXMvMTEwOTQjaXNzdWVjb21tZW50LTI2MzI0MDQyMCcsXG4gICAgICApO1xuICAgICAgX3dhcm5lZE1pc3NpbmdOYXRpdmVBbmltYXRlZCA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiBjb25maWcudXNlTmF0aXZlRHJpdmVyIHx8IGZhbHNlO1xufVxuXG5mdW5jdGlvbiB0cmFuc2Zvcm1EYXRhVHlwZSh2YWx1ZTogYW55KTogbnVtYmVyIHtcbiAgLy8gQ2hhbmdlIHRoZSBzdHJpbmcgdHlwZSB0byBudW1iZXIgdHlwZSBzbyB3ZSBjYW4gcmV1c2UgdGhlIHNhbWUgbG9naWMgaW5cbiAgLy8gaU9TIGFuZCBBbmRyb2lkIHBsYXRmb3JtXG4gIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIGlmICgvZGVnJC8udGVzdCh2YWx1ZSkpIHtcbiAgICBjb25zdCBkZWdyZWVzID0gcGFyc2VGbG9hdCh2YWx1ZSkgfHwgMDtcbiAgICBjb25zdCByYWRpYW5zID0gKGRlZ3JlZXMgKiBNYXRoLlBJKSAvIDE4MC4wO1xuICAgIHJldHVybiByYWRpYW5zO1xuICB9IGVsc2Uge1xuICAgIC8vIEFzc3VtZSByYWRpYW5zXG4gICAgcmV0dXJuIHBhcnNlRmxvYXQodmFsdWUpIHx8IDA7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIEFQSSxcbiAgYWRkV2hpdGVsaXN0ZWRTdHlsZVByb3AsXG4gIGFkZFdoaXRlbGlzdGVkVHJhbnNmb3JtUHJvcCxcbiAgYWRkV2hpdGVsaXN0ZWRJbnRlcnBvbGF0aW9uUGFyYW0sXG4gIHZhbGlkYXRlU3R5bGVzLFxuICB2YWxpZGF0ZVRyYW5zZm9ybSxcbiAgdmFsaWRhdGVJbnRlcnBvbGF0aW9uLFxuICBnZW5lcmF0ZU5ld05vZGVUYWcsXG4gIGdlbmVyYXRlTmV3QW5pbWF0aW9uSWQsXG4gIGFzc2VydE5hdGl2ZUFuaW1hdGVkTW9kdWxlLFxuICBzaG91bGRVc2VOYXRpdmVEcml2ZXIsXG4gIHRyYW5zZm9ybURhdGFUeXBlLFxuICBnZXQgbmF0aXZlRXZlbnRFbWl0dGVyKCkge1xuICAgIGlmICghbmF0aXZlRXZlbnRFbWl0dGVyKSB7XG4gICAgICBuYXRpdmVFdmVudEVtaXR0ZXIgPSBuZXcgTmF0aXZlRXZlbnRFbWl0dGVyKE5hdGl2ZUFuaW1hdGVkTW9kdWxlKTtcbiAgICB9XG4gICAgcmV0dXJuIG5hdGl2ZUV2ZW50RW1pdHRlcjtcbiAgfSxcbn07XG4iXX0=