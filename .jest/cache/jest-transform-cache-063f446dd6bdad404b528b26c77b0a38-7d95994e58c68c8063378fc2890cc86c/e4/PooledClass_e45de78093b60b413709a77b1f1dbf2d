774f6d1832f187005e14e280f03b7f79
'use strict';

var invariant = require('fbjs/lib/invariant');

var oneArgumentPooler = function oneArgumentPooler(copyFieldsFrom) {
  var Klass = this;

  if (Klass.instancePool.length) {
    var _instance = Klass.instancePool.pop();

    Klass.call(_instance, copyFieldsFrom);
    return _instance;
  } else {
    return new Klass(copyFieldsFrom);
  }
};

var twoArgumentPooler = function twoArgumentPooler(a1, a2) {
  var Klass = this;

  if (Klass.instancePool.length) {
    var _instance2 = Klass.instancePool.pop();

    Klass.call(_instance2, a1, a2);
    return _instance2;
  } else {
    return new Klass(a1, a2);
  }
};

var threeArgumentPooler = function threeArgumentPooler(a1, a2, a3) {
  var Klass = this;

  if (Klass.instancePool.length) {
    var _instance3 = Klass.instancePool.pop();

    Klass.call(_instance3, a1, a2, a3);
    return _instance3;
  } else {
    return new Klass(a1, a2, a3);
  }
};

var fourArgumentPooler = function fourArgumentPooler(a1, a2, a3, a4) {
  var Klass = this;

  if (Klass.instancePool.length) {
    var _instance4 = Klass.instancePool.pop();

    Klass.call(_instance4, a1, a2, a3, a4);
    return _instance4;
  } else {
    return new Klass(a1, a2, a3, a4);
  }
};

var standardReleaser = function standardReleaser(instance) {
  var Klass = this;
  invariant(instance instanceof Klass, 'Trying to release an instance into a pool of a different type.');
  instance.destructor();

  if (Klass.instancePool.length < Klass.poolSize) {
    Klass.instancePool.push(instance);
  }
};

var DEFAULT_POOL_SIZE = 10;
var DEFAULT_POOLER = oneArgumentPooler;

var addPoolingTo = function addPoolingTo(CopyConstructor, pooler) {
  var NewKlass = CopyConstructor;
  NewKlass.instancePool = [];
  NewKlass.getPooled = pooler || DEFAULT_POOLER;

  if (!NewKlass.poolSize) {
    NewKlass.poolSize = DEFAULT_POOL_SIZE;
  }

  NewKlass.release = standardReleaser;
  return NewKlass;
};

var PooledClass = {
  addPoolingTo: addPoolingTo,
  oneArgumentPooler: oneArgumentPooler,
  twoArgumentPooler: twoArgumentPooler,
  threeArgumentPooler: threeArgumentPooler,
  fourArgumentPooler: fourArgumentPooler
};
module.exports = PooledClass;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlBvb2xlZENsYXNzLmpzIl0sIm5hbWVzIjpbImludmFyaWFudCIsInJlcXVpcmUiLCJvbmVBcmd1bWVudFBvb2xlciIsImNvcHlGaWVsZHNGcm9tIiwiS2xhc3MiLCJpbnN0YW5jZVBvb2wiLCJsZW5ndGgiLCJpbnN0YW5jZSIsInBvcCIsImNhbGwiLCJ0d29Bcmd1bWVudFBvb2xlciIsImExIiwiYTIiLCJ0aHJlZUFyZ3VtZW50UG9vbGVyIiwiYTMiLCJmb3VyQXJndW1lbnRQb29sZXIiLCJhNCIsInN0YW5kYXJkUmVsZWFzZXIiLCJkZXN0cnVjdG9yIiwicG9vbFNpemUiLCJwdXNoIiwiREVGQVVMVF9QT09MX1NJWkUiLCJERUZBVUxUX1BPT0xFUiIsImFkZFBvb2xpbmdUbyIsIkNvcHlDb25zdHJ1Y3RvciIsInBvb2xlciIsIk5ld0tsYXNzIiwiZ2V0UG9vbGVkIiwicmVsZWFzZSIsIlBvb2xlZENsYXNzIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBVUE7O0FBRUEsSUFBTUEsU0FBUyxHQUFHQyxPQUFPLENBQUMsb0JBQUQsQ0FBekI7O0FBU0EsSUFBTUMsaUJBQWlCLEdBQUcsU0FBcEJBLGlCQUFvQixDQUFTQyxjQUFULEVBQXlCO0FBQ2pELE1BQU1DLEtBQUssR0FBRyxJQUFkOztBQUNBLE1BQUlBLEtBQUssQ0FBQ0MsWUFBTixDQUFtQkMsTUFBdkIsRUFBK0I7QUFDN0IsUUFBTUMsU0FBUSxHQUFHSCxLQUFLLENBQUNDLFlBQU4sQ0FBbUJHLEdBQW5CLEVBQWpCOztBQUNBSixJQUFBQSxLQUFLLENBQUNLLElBQU4sQ0FBV0YsU0FBWCxFQUFxQkosY0FBckI7QUFDQSxXQUFPSSxTQUFQO0FBQ0QsR0FKRCxNQUlPO0FBQ0wsV0FBTyxJQUFJSCxLQUFKLENBQVVELGNBQVYsQ0FBUDtBQUNEO0FBQ0YsQ0FURDs7QUFXQSxJQUFNTyxpQkFBaUIsR0FBRyxTQUFwQkEsaUJBQW9CLENBQVNDLEVBQVQsRUFBYUMsRUFBYixFQUFpQjtBQUN6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QUFuQjtBQUNBLFNBQU9TLFFBQVA7QUFDRCxDQW5CRDs7QUFxQkEsSUFBTUcsV0FBVyxHQUFHO0FBQ2xCTixFQUFBQSxZQUFZLEVBQUVBLFlBREk7QUFFbEJyQixFQUFBQSxpQkFBaUIsRUFBR0EsaUJBRkY7QUFHbEJRLEVBQUFBLGlCQUFpQixFQUFHQSxpQkFIRjtBQUlsQkcsRUFBQUEsbUJBQW1CLEVBQUdBLG1CQUpKO0FBS2xCRSxFQUFBQSxrQkFBa0IsRUFBR0E7QUFMSCxDQUFwQjtBQVFBZSxNQUFNLENBQUNDLE9BQVAsR0FBaUJGLFdBQWpCIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIEZhY2Vib29rLCBJbmMuIGFuZCBpdHMgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKiBAZm9ybWF0XG4gKiBAZmxvd1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxuY29uc3QgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG5cbi8qKlxuICogU3RhdGljIHBvb2xlcnMuIFNldmVyYWwgY3VzdG9tIHZlcnNpb25zIGZvciBlYWNoIHBvdGVudGlhbCBudW1iZXIgb2ZcbiAqIGFyZ3VtZW50cy4gQSBjb21wbGV0ZWx5IGdlbmVyaWMgcG9vbGVyIGlzIGVhc3kgdG8gaW1wbGVtZW50LCBidXQgd291bGRcbiAqIHJlcXVpcmUgYWNjZXNzaW5nIHRoZSBgYXJndW1lbnRzYCBvYmplY3QuIEluIGVhY2ggb2YgdGhlc2UsIGB0aGlzYCByZWZlcnMgdG9cbiAqIHRoZSBDbGFzcyBpdHNlbGYsIG5vdCBhbiBpbnN0YW5jZS4gSWYgYW55IG90aGVycyBhcmUgbmVlZGVkLCBzaW1wbHkgYWRkIHRoZW1cbiAqIGhlcmUsIG9yIGluIHRoZWlyIG93biBmaWxlcy5cbiAqL1xuY29uc3Qgb25lQXJndW1lbnRQb29sZXIgPSBmdW5jdGlvbihjb3B5RmllbGRzRnJvbSkge1xuICBjb25zdCBLbGFzcyA9IHRoaXM7XG4gIGlmIChLbGFzcy5pbnN0YW5jZVBvb2wubGVuZ3RoKSB7XG4gICAgY29uc3QgaW5zdGFuY2UgPSBLbGFzcy5pbnN0YW5jZVBvb2wucG9wKCk7XG4gICAgS2xhc3MuY2FsbChpbnN0YW5jZSwgY29weUZpZWxkc0Zyb20pO1xuICAgIHJldHVybiBpbnN0YW5jZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbmV3IEtsYXNzKGNvcHlGaWVsZHNGcm9tKTtcbiAgfVxufTtcblxuY29uc3QgdHdvQXJndW1lbnRQb29sZXIgPSBmdW5jdGlvbihhMSwgYTIpIHtcbiAgY29uc3QgS2xhc3MgPSB0aGlzO1xuICBpZiAoS2xhc3MuaW5zdGFuY2VQb29sLmxlbmd0aCkge1xuICAgIGNvbnN0IGluc3RhbmNlID0gS2xhc3MuaW5zdGFuY2VQb29sLnBvcCgpO1xuICAgIEtsYXNzLmNhbGwoaW5zdGFuY2UsIGExLCBhMik7XG4gICAgcmV0dXJuIGluc3RhbmNlO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBuZXcgS2xhc3MoYTEsIGEyKTtcbiAgfVxufTtcblxuY29uc3QgdGhyZWVBcmd1bWVudFBvb2xlciA9IGZ1bmN0aW9uKGExLCBhMiwgYTMpIHtcbiAgY29uc3QgS2xhc3MgPSB0aGlzO1xuICBpZiAoS2xhc3MuaW5zdGFuY2VQb29sLmxlbmd0aCkge1xuICAgIGNvbnN0IGluc3RhbmNlID0gS2xhc3MuaW5zdGFuY2VQb29sLnBvcCgpO1xuICAgIEtsYXNzLmNhbGwoaW5zdGFuY2UsIGExLCBhMiwgYTMpO1xuICAgIHJldHVybiBpbnN0YW5jZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbmV3IEtsYXNzKGExLCBhMiwgYTMpO1xuICB9XG59O1xuXG5jb25zdCBmb3VyQXJndW1lbnRQb29sZXIgPSBmdW5jdGlvbihhMSwgYTIsIGEzLCBhNCkge1xuICBjb25zdCBLbGFzcyA9IHRoaXM7XG4gIGlmIChLbGFzcy5pbnN0YW5jZVBvb2wubGVuZ3RoKSB7XG4gICAgY29uc3QgaW5zdGFuY2UgPSBLbGFzcy5pbnN0YW5jZVBvb2wucG9wKCk7XG4gICAgS2xhc3MuY2FsbChpbnN0YW5jZSwgYTEsIGEyLCBhMywgYTQpO1xuICAgIHJldHVybiBpbnN0YW5jZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbmV3IEtsYXNzKGExLCBhMiwgYTMsIGE0KTtcbiAgfVxufTtcblxuY29uc3Qgc3RhbmRhcmRSZWxlYXNlciA9IGZ1bmN0aW9uKGluc3RhbmNlKSB7XG4gIGNvbnN0IEtsYXNzID0gdGhpcztcbiAgaW52YXJpYW50KFxuICAgIGluc3RhbmNlIGluc3RhbmNlb2YgS2xhc3MsXG4gICAgJ1RyeWluZyB0byByZWxlYXNlIGFuIGluc3RhbmNlIGludG8gYSBwb29sIG9mIGEgZGlmZmVyZW50IHR5cGUuJyxcbiAgKTtcbiAgaW5zdGFuY2UuZGVzdHJ1Y3RvcigpO1xuICBpZiAoS2xhc3MuaW5zdGFuY2VQb29sLmxlbmd0aCA8IEtsYXNzLnBvb2xTaXplKSB7XG4gICAgS2xhc3MuaW5zdGFuY2VQb29sLnB1c2goaW5zdGFuY2UpO1xuICB9XG59O1xuXG5jb25zdCBERUZBVUxUX1BPT0xfU0laRSA9IDEwO1xuY29uc3QgREVGQVVMVF9QT09MRVIgPSBvbmVBcmd1bWVudFBvb2xlcjtcblxudHlwZSBQb29sZXIgPSBhbnk7XG5cbi8qKlxuICogQXVnbWVudHMgYENvcHlDb25zdHJ1Y3RvcmAgdG8gYmUgYSBwb29sYWJsZSBjbGFzcywgYXVnbWVudGluZyBvbmx5IHRoZSBjbGFzc1xuICogaXRzZWxmIChzdGF0aWNhbGx5KSBub3QgYWRkaW5nIGFueSBwcm90b3R5cGljYWwgZmllbGRzLiBBbnkgQ29weUNvbnN0cnVjdG9yXG4gKiB5b3UgZ2l2ZSB0aGlzIG1heSBoYXZlIGEgYHBvb2xTaXplYCBwcm9wZXJ0eSwgYW5kIHdpbGwgbG9vayBmb3IgYVxuICogcHJvdG90eXBpY2FsIGBkZXN0cnVjdG9yYCBvbiBpbnN0YW5jZXMuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gQ29weUNvbnN0cnVjdG9yIENvbnN0cnVjdG9yIHRoYXQgY2FuIGJlIHVzZWQgdG8gcmVzZXQuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBwb29sZXIgQ3VzdG9taXphYmxlIHBvb2xlci5cbiAqL1xuY29uc3QgYWRkUG9vbGluZ1RvID0gZnVuY3Rpb248VD4oXG4gIENvcHlDb25zdHJ1Y3RvcjogQ2xhc3M8VD4sXG4gIHBvb2xlcjogUG9vbGVyLFxuKTogQ2xhc3M8VD4gJiB7XG4gIGdldFBvb2xlZChcbiAgICAuLi5hcmdzOiAkUmVhZE9ubHlBcnJheTxtaXhlZD5cbiAgKTogLyogYXJndW1lbnRzIG9mIHRoZSBjb25zdHJ1Y3RvciAqLyBULFxuICByZWxlYXNlKGluc3RhbmNlOiBtaXhlZCk6IHZvaWQsXG59IHtcbiAgLy8gQ2FzdGluZyBhcyBhbnkgc28gdGhhdCBmbG93IGlnbm9yZXMgdGhlIGFjdHVhbCBpbXBsZW1lbnRhdGlvbiBhbmQgdHJ1c3RzXG4gIC8vIGl0IHRvIG1hdGNoIHRoZSB0eXBlIHdlIGRlY2xhcmVkXG4gIGNvbnN0IE5ld0tsYXNzID0gKENvcHlDb25zdHJ1Y3RvcjogYW55KTtcbiAgTmV3S2xhc3MuaW5zdGFuY2VQb29sID0gW107XG4gIE5ld0tsYXNzLmdldFBvb2xlZCA9IHBvb2xlciB8fCBERUZBVUxUX1BPT0xFUjtcbiAgaWYgKCFOZXdLbGFzcy5wb29sU2l6ZSkge1xuICAgIE5ld0tsYXNzLnBvb2xTaXplID0gREVGQVVMVF9QT09MX1NJWkU7XG4gIH1cbiAgTmV3S2xhc3MucmVsZWFzZSA9IHN0YW5kYXJkUmVsZWFzZXI7XG4gIHJldHVybiBOZXdLbGFzcztcbn07XG5cbmNvbnN0IFBvb2xlZENsYXNzID0ge1xuICBhZGRQb29saW5nVG86IGFkZFBvb2xpbmdUbyxcbiAgb25lQXJndW1lbnRQb29sZXI6IChvbmVBcmd1bWVudFBvb2xlcjogUG9vbGVyKSxcbiAgdHdvQXJndW1lbnRQb29sZXI6ICh0d29Bcmd1bWVudFBvb2xlcjogUG9vbGVyKSxcbiAgdGhyZWVBcmd1bWVudFBvb2xlcjogKHRocmVlQXJndW1lbnRQb29sZXI6IFBvb2xlciksXG4gIGZvdXJBcmd1bWVudFBvb2xlcjogKGZvdXJBcmd1bWVudFBvb2xlcjogUG9vbGVyKSxcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUG9vbGVkQ2xhc3M7XG4iXX0=